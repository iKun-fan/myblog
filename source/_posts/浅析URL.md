# 浅析URL
URL是李爵士发明的三样东西中的其中一样 (WWW = **URL** + HTTP + HTML)，要理解URL是什么就要先知到我们的电脑是怎么上网的，首先就要从IP说起。
## IP是什么
IP是Internet Protocol的缩写，意思是网际互连协议。它主要约定了两件事情：1. 如何定位一台设备；2. 如何封装数据报文，以跟其他设备交流。

IP分为内网IP和外网IP，内网设备想要访问外网还需要一台路由器。下面以日常上网为例，分别说明这三个概念。

### 外网IP
外网IP就是从网络服务运营商租来的，装宽带的时候就把你的外网IP分配好了，你的外网IP不是固定的，因为IP资源是大家共用的，重启路由器时可能会给你重新分配一个新的外网IP。

为了上网，运营商还会给你安装一台路由器，这才能让你的设备有访问外网的能力。

### 内网IP
路由器会在你的家里创建一个内网，这个内网中可能有你通过网线连接的电脑和通过无线WI-FI连接的手机等设备。

一般来说内网IP是192.168.xxx.xxx格式的。比如路由器自己的内网IP是192.168.1.1，你电脑的内网IP是192.168.1.2，你手机的内网IP是192.168.1.3，以此类推。

### 路由器
内网设备想要访问外网就必须经过路由器，外网设备想要把内容送到内网也必须经过路由器。

内外网就像两个隔绝的空间，无法直接沟通，唯一的联通点就是路由器。

有了IP还不够，还需要有端口。

## 端口
每台机器都能提供很多服务，每一个服务一个号码。就像去食堂打饭，1号窗口打米饭，2号窗口打黄焖鸡。

### 一些默认端口
* HTTP服务使用80端口
* HTTPS服务使用443端口
* FTP服务使用21端口
* 0到1023号端口是保留给系统使用的
* [端口列表](https://zh.wikipedia.org/wiki/TCP/UDP%E7%AB%AF%E5%8F%A3%E5%88%97%E8%A1%A8#0.E5.88.B01023.E5.8F.B7.E7.AB.AF.E5.8F.A3)

一共有65535个端口，IP和端口缺一不可。

## 域名
域名就是IP的别称

### 怎么知到域名所对应的IP
通过```ping```指令，在控制台输入```ping baidu.com```就能知到百度的ip地址。

有时会发现一个域名对应多个IP，这是为了负载均衡，都访问同一个IP服务器可能承受不住。也有一个IP对应多个域名的情况，一般穷开发者会这样做。

## DNS
将域名和IP对应起来

### 过程
1. 输入域名后，浏览器会向网络运营商提供的DNS服务器查询这个域名对应什么IP
2. 网络运营商回答一个IP
3. 浏览器向这个IP的80/443端口发送请求
4. 对方服务器回应请求

## 访问网页
### 访问不同的页面
通过路径实现
* ```https://developer.mozilla.org/zh-CN/docs/Web/CSS```
* ```https://developer.mozilla.org/zh-CN/docs/Web/HTML```

### 同一个页面，不同的内容
通过查询参数做到
* ```www.baidu.com/s?wd=helloworld```
* ```www.baidu.com/s?wd=hi```

### 同一个内容，不同的位置
通过锚点实现
* ```https://developer.mozilla.org/zh-CN/docs/Web/CSS#参考书```
* ```https://developer.mozilla.org/zh-CN/docs/Web/CSS#教程```

```#```号后面的就是锚点，**特别注意**锚点是无法在Network面板中看到的，因为锚点不会传送给服务器

## URL
URL = 协议 + 域名或IP + 端口号 + 路径 + 查询字符串 + 锚点

### 举例
```https://www.baidu.com/s?wd=hello&rsv_spt=1#5```
* ```https```是协议
* ```www.baidu.com```是域名
* ```/s```是路径
* ```wd=hello&rsv_spt=1```是查询参数
* ```#5```是锚点

端口不写就是使用默认端口，HTTPS默认443端口

## 其他
* .com 是顶级域名，baidu.com是二级域名，www.baidu.com是三级域名，它们是父子关系
* www是多余的，xxx.com和www.xxx.com可以不是同一个网站。
